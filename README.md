# substrate-zk

A Substrate-based chain supporting `ZK-SNARK`(change Bellman's verifier to `no_std` to adapt substrate)
you can use this `verifier pallet` to verify the proof(uncompressed data) with `bls12_381` curve

## Download substrate-zk
```
git clone --recurse-submodules https://github.com/Zkvers/substrate-zk
```

## Build and Run
you should have known how to build a substrate-based chain. 

build the chain:
```
cargo build --release
```

run the chain:
```
./target/release/node-template --dev --tmp
```

## Test Bellman-verifier
### Generate Proof
First of all, you need to use `snarkjs-bellman-adapter` in the root directory of this project to generate proof(`proof_hex.json`) and verification(`vkey_hex.json`). Please refer to the [README](https://github.com/Zkvers/snarkjs-bellman-adapter/blob/main/README.md) for the detailed generation process.
I will show a minimal example with this circuit: `a*b=c`.
### Verify Proof on substarte-zk 
- call the function `generate_proof_vkey` of `pallet-verifier` to store `proof` and `verification key`(pass the hex data).
- call the `verifier` function to verify the proof.
> You can verify all proofs generated by snarkjs with `BLS12_381` through this pallet.

TODO:  
- write a practical circuit by circom with bls12_381 cuve(eg: minimal rollup, small game with zk, and others...) 
- More details need to be explained in readme in the future